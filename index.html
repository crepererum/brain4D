<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>brain4D</title>
		<link rel="shortcut icon" href="favicon.ico" />
		<link rel="stylesheet" type="text/css" href="css/normalize.css" />
		<link rel="stylesheet" type="text/css" href="css/gh-fork-ribbon.css" />
		<link rel="stylesheet" type="text/css" href="css/brain4D.css" />
		<script type="text/javascript" src="js/modernizr.js"></script>
		<script type="text/javascript" src="js/gl-matrix-min.js"></script>
		<script type="text/javascript" src="js/ucsv-min.js"></script>
		<script type="text/javascript" src="js/brain4D.js"></script>
		<script id="shader-fs" type="x-shader/x-fragment">
			precision mediump float;

			uniform vec2 screenSize;

			varying vec4 realPos;
			varying float projSize;
			varying vec2 projPos;

			void main(void) {
				float red = 1.0;
				float blue = 1.0;
				float green = 1.0;
				float alpha = (1.0 - abs(realPos[3]));
				if (realPos[3] > 0.0) {
					blue = 1.0 - realPos[3];
					green = 1.0 - realPos[3];
				} else {
					red = 1.0 + realPos[3];
					green = 1.0 + realPos[3];
				}

				vec2 pos = mod(gl_FragCoord.xy - (vec2(1.0) + projPos) * screenSize / 2.0 + vec2(projSize / 2.0), vec2(projSize)) - vec2(projSize / 2.0);
				float dist_squared = dot(pos, pos);
				float e1 = projSize / 2.5;
				float e2 = projSize / 2.0;
				float fade = 1.0 - smoothstep(e1 * e1, e2 * e2, dist_squared);

				gl_FragColor = vec4(red, green, blue, fade * alpha);
			}
		</script>
		<script id="shader-vs" type="x-shader/x-vertex">
			attribute vec4 aVertexPosition;

			uniform mat4 rotMatrix;
			uniform vec4 transVec;
			uniform mat4 projMatrix;

			varying vec4 realPos;
			varying float projSize;
			varying vec2 projPos;

			void main(void) {
				realPos = rotMatrix * aVertexPosition + transVec;
				gl_Position = projMatrix * vec4(vec3(realPos), 1.0);
				projPos = gl_Position.xy;

				projSize = max(0.0, 20.0 / (4.0 - realPos[2]));
				gl_PointSize = projSize;
			}
		</script>
	</head>
	<body>
		<div id="container">
			<div id="browserMessage" class="message">
				<div>
					<h2>Incompatible browser</h2>
					<p>Your browser is not compatible with this web application. Use the recent version of a modern, mainstream browser (e.g. <a href="https://www.google.com/chrome">Chrome</a> or <a href="https://www.mozilla.org/firefox">Firefox</a>) and activate JavaScript to use this application. Please also ensure that you use a fully functional graphic driver.</p>
				</div>
			</div>
			<div id="loadMessage" class="message">
				<div>
					<h2>Load application</h2>
					<p>Please wait a moment...</p>
				</div>
			</div>
			<div id="main">
				<div id="crosshair"></div>
				<canvas id="glcanvas"></canvas>
			</div>
			<div id="sidebar">
				<div>
					<div id="tools">
						<h1><span class="logoB">b</span><span class="logoR">r</span><span class="logoA">a</span><span class="logoI">i</span><span class="logoN">n</span><span class="logo4">4</span><span class="logoD">D</span></h1>
						<p class="slogan">nice 4D scatterplot</p>
						<h2>mode</h2>
						<ul class="buttonList">
							<li class="switcher mode1 button"><img src="img/key1.png" alt="keyboard 1" />Move</li>
							<li class="switcher mode2 button"><img src="img/key2.png" alt="keyboard 2" />Rotate</li>
							<li class="switcher mode3 button"><img src="img/key3.png" alt="keyboard 3" />Scale</li>
						</ul>
						<h2>w rotation axis</h2>
						<ul class="buttonList">
							<li class="switcher axis0 button"><img src="img/mouse2.png" alt="middle mouse key" />X</li>
							<li class="switcher axis1 button"><img src="img/mouse2.png" alt="middle mouse key" />Y</li>
							<li class="switcher axis2 button"><img src="img/mouse2.png" alt="middle mouse key" />Z</li>
						</ul>
						<h2>controls</h2>
						<img id="controls" src="img/controls.png" alt="description of controls and visual representation" />
						<ul class="buttonList">
							<li id="resetButton" class="button"><img src="img/keyR.png" alt="keyboard r" />Reset</li>
						</ul>
						<h2>data</h2>
						<div id="prepared">
							<p>Load prepared data:</p>
							<select id="datasets"></select>
							<div id="prepared_info">
								<h3 id="prepared_title"></h3>
								<p id="prepared_description"></p>
							</div>
						</div>
						<div id="dropzone">...or drop your CSV file here!</div>
					</div>
					<div id="legalPlaceholder"></div>
					<div id="legal">
						<p>Coded by <a href="http://crepererum.net/" target="_blank">crepererum</a></p>
						<p>using <a href="http://glmatrix.net/" target="_blank">glMatrix</a>, <a href="http://www.uselesscode.org/javascript/csv/" target="_blank">Ucsv.js</a>, <a href="http://necolas.github.com/normalize.css/" target="_blank">normalize.css</a> and <a href="http://modernizr.com/" target="_blank">Modernizr</a></p>
					</div>
				</div>
			</div>
			<div id="clear"></div>
			<div class="github-fork-ribbon-wrapper right">
				<div class="github-fork-ribbon" style="background:black;">
					<a href="https://github.com/crepererum/brain4D" target="_blank">Fork me on GitHub!</a>
				</div>
			</div>
		</div>
	</body>
</html>

